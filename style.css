/* ... (previous styles from the dark theme) ... */

/* Background Layer Styles */
.background-layer {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: -1; /* Behind all other content */
    background-size: cover; /* Changed to cover for better fit, will be adjusted to 'auto 100%' or '100% auto' by JS */
    background-position: center center;
    background-repeat: no-repeat;
    opacity: 1; /* Default opacity, controlled by JS */
    transition: opacity 0.3s ease-in-out;
}

.background-layer::after { /* Gradient overlay */
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: linear-gradient(to bottom, 
        rgba(var(--dark-bg-primary-rgb), 0) 0%, /* Top: transparent using RGB version of bg color */
        rgba(var(--dark-bg-primary-rgb), 0.3) 50%, /* Mid: slightly opaque */
        rgba(var(--dark-bg-primary-rgb), 1) 100% /* Bottom: fully opaque with primary bg color */
    );
    pointer-events: none; /* Allow clicks through the gradient */
}


/* Background Settings Section Styles */
.background-settings-footer {
    margin-top: 30px; /* Same as io-section-footer */
    padding-bottom: 10px;
    background: var(--dark-bg-secondary); /* Consistent with other footer cards */
    border: 1px solid var(--border-color-dark);
    border-radius: var(--border-radius);
    box-shadow: var(--card-shadow-dark);
}

.background-settings-footer h3 {
    margin-bottom: 20px;
    border-bottom: 1px solid var(--border-color-accent);
    padding-bottom: 10px;
    color: var(--primary-accent-color);
    text-transform: uppercase;
    letter-spacing: 0.5px;
    text-shadow: var(--text-shadow-accent);
}

.background-settings-footer .input-group {
    margin-bottom: 15px;
}

.background-settings-footer .input-group label {
    color: var(--light-text-primary);
    font-size: 0.95em;
    margin-bottom: 8px;
}

.background-settings-footer input[type="file"] {
    padding: 10px;
    border: 1px dashed var(--primary-accent-color);
    border-radius: 4px;
    width: 100%;
    font-size: 0.95em;
    background-color: var(--dark-bg-tertiary);
    color: var(--light-text-secondary);
    cursor: pointer;
}
.background-settings-footer input[type="file"]::file-selector-button {
    background-color: var(--primary-accent-color);
    color: var(--dark-bg-primary);
    border: none;
    padding: 8px 12px;
    border-radius: 4px;
    cursor: pointer;
    margin-right: 10px;
    text-transform: uppercase;
    font-weight: bold;
}

.background-settings-footer input[type="range"] {
    width: 100%;
    cursor: pointer;
    accent-color: var(--primary-accent-color); /* Modern way to style range slider thumb */
}

/* For older browser compatibility for range slider track/thumb: */
.background-settings-footer input[type="range"]::-webkit-slider-runnable-track {
  width: 100%;
  height: 8px;
  cursor: pointer;
  background: var(--dark-bg-tertiary);
  border-radius: 5px;
  border: 1px solid var(--border-color-dark);
}
.background-settings-footer input[type="range"]::-webkit-slider-thumb {
  -webkit-appearance: none;
  height: 18px;
  width: 18px;
  border-radius: 50%;
  background: var(--primary-accent-color);
  cursor: pointer;
  margin-top: -6px; /* Adjust to center thumb on track */
  box-shadow: 0 0 5px rgba(0, 240, 255, 0.5);
}
.background-settings-footer input[type="range"]::-moz-range-track {
  width: 100%;
  height: 8px;
  cursor: pointer;
  background: var(--dark-bg-tertiary);
  border-radius: 5px;
  border: 1px solid var(--border-color-dark);
}
.background-settings-footer input[type="range"]::-moz-range-thumb {
  height: 18px;
  width: 18px;
  border-radius: 50%;
  background: var(--primary-accent-color);
  cursor: pointer;
  border: none;
   box-shadow: 0 0 5px rgba(0, 240, 255, 0.5);
}
.background-settings-footer input[type="range"]::-ms-track {
  width: 100%;
  height: 8px;
  cursor: pointer;
  background: transparent;
  border-color: transparent;
  color: transparent;
}
.background-settings-footer input[type="range"]::-ms-fill-lower {
  background: var(--dark-bg-tertiary);
  border: 1px solid var(--border-color-dark);
  border-radius: 10px;
}
.background-settings-footer input[type="range"]::-ms-fill-upper {
  background: var(--dark-bg-tertiary);
  border: 1px solid var(--border-color-dark);
  border-radius: 10px;
}
.background-settings-footer input[type="range"]::-ms-thumb {
  height: 18px;
  width: 18px;
  border-radius: 50%;
  background: var(--primary-accent-color);
  cursor: pointer;
  margin-top: 0px; /* IE11 requires 0 */
  box-shadow: 0 0 5px rgba(0, 240, 255, 0.5);
}


.background-settings-footer button#resetBackgroundButton {
    padding: 10px 18px;
    font-size: 0.9em;
    background-color: var(--secondary-color); /* Using a more neutral color for reset */
    color: var(--light-text-primary);
    border: 1px solid var(--border-color-dark);
    border-radius: var(--border-radius);
    cursor: pointer;
    margin-top: 10px;
    transition: background-color 0.2s ease, color 0.2s ease;
    text-transform: uppercase;
}
.background-settings-footer button#resetBackgroundButton:hover {
    background-color: var(--light-text-disabled);
    color: var(--dark-bg-primary);
}

/* Ensure :root variable for RGB conversion is set */
:root {
    /* ... other variables ... */
    --dark-bg-primary-rgb: 15, 16, 20; /* RGB for #0f1014 */
}

/* Adjust main container if background is very light and text becomes unreadable */
body.light-background-active .main-container .card,
body.light-background-active .main-container h3,
body.light-background-active .main-container h4,
body.light-background-active .main-container h5,
body.light-background-active .main-container label,
body.light-background-active .main-container span,
body.light-background-active .main-container p,
body.light-background-active .main-container input,
body.light-background-active .main-container select,
body.light-background-active .main-container button {
    /* Example: Add subtle shadow or border to text/elements if needed for readability against light BG */
    /* text-shadow: 0 0 3px var(--dark-bg-primary); */
}


/* ... (rest of your existing styles) ... */
